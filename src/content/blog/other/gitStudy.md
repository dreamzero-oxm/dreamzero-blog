---
title: GIT学习笔记
description: GIT学习笔记（杂）
date: 2022-07-28
slug: 
image: 
categories:
    - 其他
    - 软件技能
tags:
    - 其他
    - 软件技能
    - GIT
updated: 2022-07-28
comments: false
---
1. 创建版本库 git init
1. 添加文件到暂存区 git add 
   - git add . 将所有未暂存的和未跟踪的放入暂存区
3. 显示工作目录树的状态，即当前的视图状态 git status
3. 提交 git commit  参数：-m 提交留言 -a告诉git提交全部修改过的文件
   - 若只输入git commit，则git会让输入“留言”，输入完后 “ESC + :wq”
5. 创建分支： bit branch 新分支名称 父分支名称 （例如：git branch RB_1.0 master)  
   - -d  删除分支 
   - -b(创建并切换到该分支) 
   - -m 修改分支名称
   - -r 显示远程分支
6. 切换分支是 git checkout
6. 在git打标签（意味着在版本库的历史中标记处特定的点，将来容易找到相应版本的代码）git tag 标签 分支（例如：git tag 1.0 RB_1.0）
6. 变基命令 git rebase 把一条分支上的修改在另一条分支的末梢重现（也就是在所用的分支上，将另一个分支的修改合并到此分支，多用于BUG修复）
   - **git rebase -i ，用这个命令，可以重新塑造历史**
9. 为代码发布创建归档文件。创建一个gzip文件



> $ git archive --format=tar
> --prefix=mysite-1.0/1.0 
> |gzip > mysite-1.0.tar.gz
> 三个参数 第一个--format指明要产生tar格式的输出，第二个，--prefix指明保包中所有东西都放在mysite-1.0/目录下，最后1.0指明需要归档的标签名称



10. 克隆远程版本库 git clone 有两个参数 远程版本库的位置和存放该版本库的本地目录。
   - git clone <仓库路径>[本地目录]
11. 给命令git add添加-i参数会启动交互命令提示符，在这种方式下可以交互暂存新文件，暂存对已有文件的修改，甚至只暂存对部分的修改。（选择add）
11. 命令git add又直接进入补丁模式的快捷方式，而无须先启动交互模式。在命令git add后添加-p参数即可直接进入补丁模式。
11. git commit --amend //也叫**追加提交**，它可以在不增加一个新的commit-id的情况下将新修改的代码追加到前一次的commit-id中
11. 使用git的命令git status和git diff，可以找出工作目录树中做出了哪些修改，以及是如何修改的（git diff 后添加参数HEAD，可以比较工作目录树与版本库中的差别）



> HEAD关键字指的是当前所在分支末梢的最新提交（也就是版本库中给该分支上的最新版本）



15. 命令git mv <原文件命名称> <新文件名称>来移动文件（此命令告诉git使用原文加源文件内容来创建新文件，新文件保留源文件的历史修改记录，并删除源文件）
15. 分支改名 git branch -m <原分支名称> <新分支名称>
15. 直接合并分支，只需要指定乡合并到当前分支的缘分支名称 git merge <源分支名称>（例如现在是master分支，要将alternate分支合并到master分支，则git merge alternate）
15. 功能分支，在已有分支上创建新的分支，用于新功能开发或者BUG修复，然后通过一个压合提交将新分支上的修改合并回来。调用git merge 并给他传送参数--squash告诉git merge命令，将另一条分支上的全部提交压合成当前分支的一个提交
15. **拣选合并**。有时候分之间只需要合并一个提交，并不需要要合并一条分支上的全部改动，因为该分支上可能含有尚未完成过的新功能忙活着包换一些尚不能合并的改动。**使用git cherry-pick命令可以合并单个提交**。参数-n的功能是，完成辩词拣选操作后git停了下来，，不是立即提交，而是暂存下来，可以进行下一个拣选操作，拣选完后一起提交，以免有多个拣选多个提交。
15. `将代码合并回当前分支后`（注意是要将代码合并回当前分支之后），可以用参数-d的git branch命令删除旧分支。 只有当要删除的分支已经成功合并到当前分支的时候，删除分支的操作才会成功。如果确定无须合并，但必须要删除分支，则运行git bracnh -D <分支名称>，git就无须再检查要删除的分支上的内容是否都已经合并过来了。
15. **分支重命名**，git branch -m <原分支名称> <新分支名称>
15. **查看git日志** ：git log 参数
   - -p可以显示版本间的代码差异 
   - `--all 显示所有分支 `
   - `--pretty=oneline 将提交信息显示为一行 `
   - `--abbrev-commit 使得输出的 commitid更简短 `
   - `--graph 以图的形式显示`
23. **指定查找范围**：假如只想查看最近五小时内的提交可以git log 后加--since="5 hours" 也可以通过加--since="5 hours" -1 来查看五小时之前的最后一个提交，也可以使用"最老版本..最新版本"这种格式作为查找范围（不包括起点，包括终点）。查看两个标签之间的历史都是有用的（git log --pretty=format:"%h %s" 1.0..HEAD）,这次在git log 命令后添加了参数--pretty=format:"%h %s"告诉git显示提交提交名称的缩写，即标题。



- ^：一个脱字号作用相当于回溯一个版本。18f922e是指18f922e之前的那个版本，即父节点。
- ~N：波浪字符加数字的操作符是指回溯N个版本。



24. 使用git diff查看工作拷贝和版本库中最新版本之间的差异。例如（git diff 18f822e 查看当前版本与目标版本的差异 ）
24. 版本回退 git reset --hard < commitID > (回退到某个版本)
   - 命令git reset可以在复位版本库后，工作目录树的中因复位产生的与版本库的差异，以便于提交，这对于在之前的提交中发现错误并需要更改时非常有用
   - 这是通过--soft参数实现的。它使得Git暂存所有的因复位带来的差异,但不提交它。之后,用户可以修改这些内容再提交,或者扔掉这些内容
   - --hard ,该选项会从版本库和工作目录树中同时删除提交。--hard就好像版本库中的删除键，且不可恢复。
26. 创建并且切换git checkout -b 分支名
26. 修改已有文件->未暂存unstaged 创建一个新文件->未跟踪untracked ，在git add后变为已暂存（staged），git commit后提交到仓库，形成一次提交记录
26. <br />
   - 生成SSH公钥 ssh-keygen -t rsa
   - 获取公钥 cat -/.ssh/id_rsa.pub
29. 连接远程仓库：git remote add <远端名称> <远程仓库地址>
   - 远端名称，默认是orgin
   - 仓库路径，从远端服务器获取此URL
   - 查看远程仓库 git remote
30. 推送版本到远程仓库 git push [-f] [-set-upstream][远端名称[本地分支名][:远端分支名]]
   - 如果远端分支名和本地分支名称相同，则可以只写本地分支
   - -f 表示强制覆盖（如果本地的代码和云端的代码有冲突，他会不让你推，-f就是强制覆盖）
   - -set-upstream 推送到远端的同时并且建立起和远端分支的关联关系
   - 例：git push --set-upstream orgin master:matser orgin(远端名称) master:master(将本地master分支与远端master分支绑定起来)
31. 查看**关联关系** git branch -vv
31. **从远程仓库中抓取和拉取**
   - 抓取：git fetch [remote name][branch name]
   - 如果不指定远端名称和分支名,则抓取所有分支。
   - 拉取：git pull [remote name][branch name]
   - 拉取指令就是将远端仓库的修改拉到本地并自动进行合并，等同于fetch+merge
   - 如果不指定远端名称和分支名，则拉取所有分支。
33. git blame 命令来查看文件中每一行的历史记录
   - -M 参数，该参数告诉命令git blame 检测在同一个文件内移动或复制的代码行
   - -C -C 参数 ，该参数告诉git blame 来查看文件之间的复制，给git log命令传递-C -C参数，也能显示文件复制信息， 当用git log命令检测文件的复制的时候，还得i传递参数-p，这样git除了显示常规日志信息之外，还会显示代码的具体变动
34. _**反转提交 **_
   - 命令： git revert (此命令通过在版本库中创建一个“反向的”新提交来抵消原来提交的改动)
   - -n 参数，通常GIT回立即提交反转结果，但是也可以通过 -n 参数告诉git先不要提交，这对于需要反转多个提交非常有用。运行多个git revert -n命令，git会暂存所有的变更，然后进行一次性提交
35. Git reflog 可以**查看所有分支的所有操作记录**（包括提交、回退、已删除的提交操作记录等 ）。
   - 每行记录都由版本号（commit id SHA），HEAD值和操作描述三部分组成。 版本号在第一列，HEAD值在第二列，操作描述信息在第三列。
   - 版本号：在之前都有提到，标识着每一次提交、合并等操作时的版本，相当于唯一标识
   - HEAD值：同样用来标识版本，但是不同于版本号的是，Head值是相对的。
   - 当HEAD值为HEAD时，表示为提交的最新版本；HEAD^表示为最新版本的上一个版本；HEAD^^表示为最新版本的上上个版本；
   - HEAD~100表示为最新版本的往上第100个版本。
   - HEAD值越小，表示版本越新，越大表示版本生成时间越久。
   - 在上面图中，我们发现HEAD值的展示形式为HEAD@{0}、 HEAD@{1}、HEAD@{2}...同样HEAD值的数字越小，表示版本越新，数字越大表示版本越旧。
   - 操作描述：记录了本次是哪种操作，以及操作时编写的描述信息。



